{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 以下为源码的正则  对正则表达式不清楚的同学可以参考小编之前写的文章(前端进阶高薪必看 - 正则篇);\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //匹配标签名 形如 abc-123\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //匹配特殊标签 形如 abc:234 前面的abc:可有可无\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配标签开始 形如 <abc-123 捕获里面的标签名\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束  >\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾 如 </abc-123> 捕获里面的标签名\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性  形如 id=\"app\"\r\n\r\nexport function parseHTML(html) {\r\n  /**\r\n   * 通过创建栈的方式来实现树的创建\r\n   * 比如 [div span] span的父亲就是 div\r\n   */\r\n  const ELEMENT_TYPE = 1; // 元素节点类型\r\n  const TEXT_TYPE = 3; // 文本节点类型\r\n  let stack = []; // 栈\r\n  let currentParent = null; // 当前元素的父级\r\n  let root = null; // 树的根节点\r\n\r\n  function createASTElement(tag, attr) {\r\n    return {\r\n      tag,\r\n      type: ELEMENT_TYPE,\r\n      attrs: attr,\r\n      parent: null,\r\n      children: [],\r\n    };\r\n  }\r\n  // 开始标签\r\n  function start(tagName, attr) {\r\n    // 如果是开始标签就开始生成 节点树\r\n    let node = createASTElement(tagName, attr);\r\n    // 然后当前有没有树根\r\n    if (!root) {\r\n      root = node;\r\n    }\r\n    // 判断当前元素有没有父元素, 默认是没有的\r\n    if (currentParent) {\r\n      node.parent = currentParent; // 给当前元素父亲赋值\r\n      currentParent.children.push(node); // 将当前元素 赋值给父亲的children\r\n    }\r\n    stack.push(node); // 将树插入栈\r\n    currentParent = node; // 以后的元素的父节点就是这个树, 每一次都不一样\r\n  }\r\n  // 文本内容\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, \"\");\r\n    // 将文本放入到父节点的children里面\r\n    text &&\r\n      currentParent.children.push({\r\n        text,\r\n        type: TEXT_TYPE,\r\n        parent: currentParent,\r\n      });\r\n  }\r\n  // 结束标签\r\n  function end() {\r\n    let node = stack.pop(); // 弹出最后一个\r\n    currentParent = stack[stack.length - 1]; // 当前父节点指针前移一位\r\n  }\r\n  function advance(n) {\r\n    html = html.substring(n); // 对匹配到的字符串进行截取\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen); // 匹配开始标签\r\n    if (start) {\r\n      let match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      };\r\n      advance(start[0].length);\r\n      // 如果不是开始标签的结束 就会一直匹配下去\r\n      let attr, end;\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        advance(attr[0].length);\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5] || true,\r\n        });\r\n      }\r\n      // 如果开始标签的结束存在的话 就将他也删除\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n      // 将匹配完之后的结果进行返回 然后做后续操作。\r\n      return match;\r\n    }\r\n  }\r\n  // html 标签最开始一定是一个<\r\n  while (html) {\r\n    // 如果indexOf 返回的值为0 则表示开始标签的 <\r\n    // 如果indexOf 返回的值大于0 则表示文本之后的 <\r\n    let textEnd = html.indexOf(\"<\");\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag(); // 开始标签的匹配结果\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      let endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue; // 跳过本次循环\r\n      }\r\n    }\r\n    if (textEnd > 0) {\r\n      let text = html.substring(0, textEnd); // 文本内容\r\n      if (text) {\r\n        chars(text);\r\n        advance(text.length);\r\n      }\r\n    }\r\n  }\r\n  \r\n  return root\r\n}\r\n","import { parseHTML } from \"./parse\";\r\n\r\n// 截取属性\r\nfunction genProps(attrs) {\r\n  let str = \"\"; //{name: value}\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === \"style\") {\r\n      let obj = {};\r\n      attr.value.split(\";\").forEach((item) => {\r\n        let [key, value] = item.split(\":\");\r\n        obj[key] = value;\r\n      });\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\n// 截取孩子\r\nfunction genChildren(children) {\r\n  // 将获取到的孩子转换为逗号隔开的字符串\r\n  return children.map((child) => gen(child)).join(\",\");\r\n}\r\n\r\n// 截取文本\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\nfunction gen(node) {\r\n  if (node.type === 1) {\r\n    return codegen(node);\r\n  } else {\r\n    let text = node.text;\r\n    // 如果匹配的不是{{ xxx }} 这种形式 则返回 _v('text')\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`;\r\n    } else {\r\n      // 如果匹配的有 {{ xxx }} 这种形式 则 返回 _v(_s('name') + 'xxx')这种形式\r\n      let tokens = [];\r\n      let match;\r\n      defaultTagRE.lastIndex = 0; // 每次匹配之前进行重置\r\n      let lastIndex = 0;\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        let index = match.index; // 匹配的位置\r\n        // 判断 匹配的位置和 上一次匹配的位置, 如果上一次匹配的位置比当前匹配的位置要小 就将中间的字符串截取出来\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        lastIndex = index + match[0].length;\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(lastIndex));\r\n      }\r\n      return `_v(${tokens.join(\"+\")})`;\r\n    }\r\n  }\r\n}\r\n\r\n// 拼接字符串\r\nfunction codegen(ast) {\r\n  /**\r\n   * _c('div',{id: 'app'}, _c('span', )) 这种格式\r\n   */\r\n  let children = genChildren(ast.children);\r\n  let code = `_c('${ast.tag}',\r\n    ${ast.attrs.length > 0 ? genProps(ast.attrs) : null}\r\n    ${ast.children.length > 0 ? `,${children}` : \"null\"})`;\r\n  return code;\r\n}\r\n\r\nexport function compilerToFunction(template) {\r\n  // 1、将template 转换成 ast语法树\r\n  let ast = parseHTML(template);\r\n  // 2、生成render 方法（render 执行后返回的结果就是 虚拟DOM）\r\n  let code = codegen(ast);\r\n  // 模板编译的原理 就是 with + new Function\r\n  code = `with(this){return ${code}}`\r\n  let render = new Function(code)\r\n\r\n  return render\r\n}\r\n","// _c\r\nexport function createElementVNode(vm, tag, data, ...children) {\r\n  if(data == null) {\r\n    data = {}\r\n  }\r\n  let key = data.key;\r\n  if (key) {\r\n    delete data.key;\r\n  }\r\n  return vnode(vm, tag, key, data, children);\r\n}\r\n\r\n// _v\r\nexport function createTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n// 虚拟DOM\r\n/**\r\n * ast和虚拟DOM的区别就是 ast只是做了语法层面的转化， 他描述的是语法本身\r\n * 虚拟DOM 描述的是DOM 元素，可以增加一些自定义属性\r\n */\r\nfunction vnode(vm, tag, key, data, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n","import { createElementVNode, createTextVNode } from \"./vdom\";\r\n\r\nfunction createElement(vnode) {\r\n  let { tag, data, children, text } = vnode;\r\n  if (typeof tag === \"string\") {\r\n    // 如果tag是字符串 则表示是标签\r\n    vnode.el = document.createElement(tag); // 将真实节点和虚拟节点对应取来，\r\n    patchProps(vnode.el, data); // 处理属性\r\n    children.forEach((child) => {\r\n      let el = createElement(child)\r\n      vnode.el.appendChild(createElement(child));\r\n    });\r\n  } else {\r\n    // 文本\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\nfunction patchProps(el, data) {\r\n  for (let key in data) {\r\n    if (key === \"style\") {\r\n      // style: {color: 'red'}\r\n      for (let styleName in data[key]) {\r\n        el.style[styleName] = data[key][styleName];\r\n      }\r\n    } else {\r\n      el.setAttribute(key, data[key]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction patch(oldNode, vnode) {\r\n  const isRealElement = oldNode.nodeType; // 判断el是不是真实的DOM节点\r\n  if (isRealElement) {\r\n    let elm = oldNode; // 获取真实元素\r\n    let parentNode = oldNode.parentNode; // 拿到父元素\r\n\r\n    const newElm = createElement(vnode); // 通过虚拟DOM 创建真实DOM\r\n    parentNode.insertBefore(newElm, elm.nextSibling) // 将新节点插入到老节点后面\r\n    parentNode.removeChild(elm) // 删除老节点\r\n    return newElm\r\n  } else {\r\n    // diff算法\r\n  }\r\n}\r\n\r\nexport function initLifecycle(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // 根据虚拟dom 生成真实DOM\r\n    const vm = this;\r\n    const el = vm.$el; // 这个el 是经过querySelector 处理的\r\n\r\n    // patch 函数既有初始化的功能 又有更新的功能\r\n    vm.$el = patch(el, vnode);\r\n  };\r\n\r\n  // _c('div', {id: 'app'}) ...\r\n  Vue.prototype._c = function () {\r\n    return createElementVNode(this, ...arguments);\r\n  };\r\n\r\n  // _v(text) ...\r\n  Vue.prototype._v = function () {\r\n    return createTextVNode(this, ...arguments);\r\n  };\r\n\r\n  // _s() ...\r\n  Vue.prototype._s = function (value) {\r\n    if (typeof value !== \"object\") return value;\r\n    return JSON.stringify(value);\r\n  };\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    return vm.$options.render.call(vm);\r\n  };\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  // 这里的el是通过querySelector 处理过的。\r\n  vm.$el = el;\r\n  // 1. 调用render函数产生虚拟节点  虚拟DOM\r\n  vm._update(vm._render());\r\n  // 2. 根据虚拟DOM 生成真实DOM\r\n  // 3. 将生成的真实DOM插入到el当中\r\n}\r\n","// 获取到数组原型上的方法\r\nlet oldArrayProto = Array.prototype;\r\n\r\nexport let newArrayProto = Object.create(oldArrayProto);\r\n// 找到所有的变异方法\r\nlet methods = [\"push\", \"pop\", \"unshift\", \"shift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\nmethods.forEach((method) => {\r\n  newArrayProto[method] = function (...args) { // 重写数组的方法，因为使用Object.create() 就类似与继承父类方法\r\n    let result = oldArrayProto[method].call(this, ...args); // 调用内部原来函数的方法\r\n    \r\n    let instated;\r\n    let ob = this.__ob__\r\n    switch(method) {\r\n      case 'push':\r\n        case 'unshift':\r\n          instated = args\r\n          break;\r\n      case 'splice':\r\n          instated = args.slice(2)\r\n          break;\r\n    }\r\n    if(instated) {\r\n      ob.observeArray(instated) // 将新加入进去的数据再次进行观测\r\n    }\r\n\r\n    return result;\r\n  };\r\n});\r\n","import { newArrayProto } from \"./array\";\r\n\r\nclass Observe {\r\n  constructor(data) {\r\n    Object.defineProperty(data, \"__ob__\", {\r\n      value: this,\r\n      enumerable: false, // 不可枚举\r\n    });\r\n    //data.__ob__ = this // 这种方式会造成死循环\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = newArrayProto;\r\n      this.observeArray(data);\r\n    } else {\r\n      // 判断data\r\n      this.walk(data);\r\n    }\r\n  }\r\n  // 循环对象， 重新定义属性\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\r\n  }\r\n  observeArray(data) {\r\n    // 观测数组, 如果数组当中含有对象,则对对象也进行劫持\r\n    data.forEach((item) => observe(item));\r\n  }\r\n}\r\n\r\n// 对象劫持\r\nfunction defineReactive(target, key, value) {\r\n  observe(value); // 如果还有对象嵌套对象 则进行递归\r\n  Object.defineProperty(target, key, {\r\n    get() {\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue); // 如果传递过来的是一个对象，则再次代理\r\n      value = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  // 对对象进行劫持\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return;\r\n  }\r\n  return new Observe(data);\r\n}\r\n","import { observe } from \"./observe\";\r\n\r\n// 状态初始化\r\nexport function initState(vm) {\r\n  const opt = vm.$options;\r\n  // 判断有没有data这个数据， 如果有则进行数据初始化\r\n  if (opt.data) {\r\n    initData(vm);\r\n  }\r\n}\r\n\r\n// 数据代理\r\nfunction proxy(vm, target, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[target][key];\r\n    },\r\n    set(newValue) {\r\n      vm[target][key] = newValue;\r\n    },\r\n  });\r\n}\r\n\r\n// 数据初始化\r\nfunction initData(vm) {\r\n  // 获取到data数据\r\n  let data = vm.$options.data;\r\n  /* 进行判断 如果data是一个对象就直接赋值 如果data是个函数则执行完在赋值,要保证data的this指向需要将data的this变成当前vm */\r\n  data = typeof data === \"function\" ? data.call(vm) : data;\r\n  // 对数据做代理\r\n  vm._data = data; // 拷贝内存地址 如果不加这一条 只是对数据进行劫持了，但是vm并访问不到数据\r\n  // 对数据进行劫持\r\n  observe(data);\r\n\r\n  for (let key in data) {\r\n    proxy(vm, \"_data\", key);\r\n  }\r\n}\r\n","import { compilerToFunction } from \"./compiler\";\r\nimport { mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function _init(options) {\r\n    // 用户初始化\r\n    // 保存vue实例，通过保存的实例来对vue进行操作\r\n    let vm = this;\r\n    // 将用户配置挂载到 $options上\r\n    vm.$options = options;\r\n    // 进行状态初始化\r\n    initState(vm);\r\n    // 进行模板的编译\r\n    if (options.el) {\r\n      this.$mount(options.el); // 实现数据的挂载\r\n    }\r\n  };\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    el = document.querySelector(el); // 获取到app根标签\r\n    let ops = vm.$options;\r\n    // 先找options里面有没有render函数， 如果没有render函数 就找有没有template\r\n    if (!ops.render) {\r\n      let template;\r\n      if (!ops.template && el) {\r\n        // 没有写模板，但是有el\r\n        template = el.outerHTML;\r\n      } else {\r\n        // 写了模板 el也存在的时候\r\n        if (el) {\r\n          template = ops.template;\r\n        }\r\n      }\r\n      if (template) {\r\n        // 对模板进行编译\r\n        const render = compilerToFunction(template);\r\n        // 这就拿到了render函数\r\n        /**\r\n         * ƒ anonymous() {\r\n            with(this){\r\n              return \r\n              _c('div',{id:\"app\",style:{\"background-color\":\" red\"}},\r\n              _v(_s(name)+\"helloworld\"+_s(age)),\r\n              _c('span',null),\r\n              _v(\"vue\"))\r\n            }\r\n          }\r\n         */\r\n        ops.render = render  // jsx 最终会编译成 h('xxxx')\r\n      }\r\n    }\r\n    mountComponent(vm, el)\r\n  };\r\n}\r\n","import { initMixin } from \"./init\"\r\nimport { initLifecycle } from \"./lifecycle\"\r\n\r\nfunction Vue(options) {\r\n  // 选项初始化\r\n  this._init(options)\r\n}\r\n\r\ninitMixin(Vue)\r\ninitLifecycle(Vue)\r\n\r\nexport default Vue\r\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attr","type","attrs","parent","children","start","tagName","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStartTag","match","name","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","forEach","item","key","JSON","stringify","slice","genChildren","map","child","gen","join","defaultTagRE","codegen","test","tokens","lastIndex","exec","index","trim","ast","code","compilerToFunction","template","render","Function","createElementVNode","vm","data","vnode","createTextVNode","undefined","createElement","el","document","patchProps","appendChild","createTextNode","styleName","style","setAttribute","patch","oldNode","isRealElement","nodeType","elm","parentNode","newElm","insertBefore","nextSibling","removeChild","initLifecycle","Vue","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","call","mountComponent","oldArrayProto","Array","newArrayProto","Object","create","methods","method","args","result","instated","ob","__ob__","observeArray","Observe","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","target","get","set","newValue","initState","opt","initData","proxy","_data","initMixin","_init","options","$mount","querySelector","ops","outerHTML"],"mappings":"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"}